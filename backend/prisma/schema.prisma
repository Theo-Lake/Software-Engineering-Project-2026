generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

// Used to tell prisma to generate client code

datasource db {
  provider = "postgresql"
}

//TODO finish schemas
model User {
  userID        Int             @id @default(autoincrement())
  username      String          @unique
  firstName     String
  lastName      String
  universityID  Int             @unique
  created_at    DateTime        @default(now()) // auto-set when row is created
  updated_at    DateTime        @updatedAt // auto-update when row is changed
  email         String          @unique
  password_hash String
  publishedJobs Job[]
  assignedJobs  JobAssignment[]
  occupation    String
}

model Job {
  jobID       Int  @id @default(autoincrement())
  // A User(publisher) can publish many jobs, though a job can only have ONE publisher m-1
  publisher   User @relation(fields: [publisherID], references: [userID])
  publisherID Int

  // A User(assignee) can be assigned many jobs, and a job can have many assignees m-m
  assignments JobAssignment[]

  type          JobTypes
  status        Status    @default(not_Complete)
  payment       Decimal
  completedDate DateTime?
  DueDate       DateTime

  created_at DateTime @default(now()) // auto-set when row is created
  updated_at DateTime @updatedAt // auto-update when row is changed

  hashtags Hashtags[]
}

// Holds the record of assigned jobs: | AssingmentID | job | Assignee |
model JobAssignment {
  assignmentID Int  @id @default(autoincrement())
  job          Job  @relation(fields: [jobID], references: [jobID])
  jobID        Int
  assignee     User @relation(fields: [userId], references: [userID])
  userId       Int
}

model Hashtags {
  hashtagID  Int      @id @default(autoincrement())
  name       String   @unique
  jobs       Job[]
  created_at DateTime @default(now()) // auto-set when row is created
}

// ENUM TYPES: 

enum Status {
  complete
  pending
  in_Progress
  not_Complete // I use snake case in some instances, because this data will be displayed, it is easier to parse later on by replacing _ with " "
  cancelled
}

enum JobTypes {
  tutoring
  delivery
  freelance
  moving
  tech_support
  general
  other
}
